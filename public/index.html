<!DOCTYPE html>
<html>
<body>
<link rel="stylesheet" href="style.css">
<h1>Select a Bot</h1>

<button onclick="location.href='/create.html'">Build a Bot</button>

<h4>Featured Bots</h4>

<div id="botList"></div>

<br>

<script src="script.js"></script>
<script>
async function loadBots() {
  const res = await fetch("/api/bots");
  const bots = await res.json();

  const div = document.getElementById("botList");
  div.innerHTML = "";

  // IMPORTANT: do NOT overwrite className
  div.classList.add("card-grid");

  bots.forEach(name => {
    const card = document.createElement("div");
    card.classList.add("bot-card");

    const title = document.createElement("h3");
    title.textContent = name;

    const btn = document.createElement("button");
    btn.type = "button";
    btn.textContent = "Start";
    btn.onclick = async () => {
      await fetch("/api/select-bot", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name })
      });
      window.location.href = "/quiz.html";
    };

    card.appendChild(title);
    card.appendChild(btn);
    div.appendChild(card);
  });
}

loadBots();
</script>

<h4>Community Bots</h4>

</body>
</html>
